#include"map.h"

int map[26][26] =
{
	{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,5,5,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,5,5,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0 },
	{ 1,1,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,1 },
	{ 2,2,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,2,2 },
	{ 0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,1,1,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,1,1,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,2,2,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,0,1,1,1,1,0,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,0,1,3,3,1,0,0,0,0,0,0,0,0,0,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,0,1,3,3,1,0,0,0,0,0,0,0,0,0,0,0 }

};

int map2[26][26] = {
	{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,5,5,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,5,5,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0 },
	{ 1,1,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,1 },
	{ 2,2,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,2,2 },
	{ 0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,1,1,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,1,1,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,2,2,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,1,1,0,0,0,1,1,1,1,0,0,0,1,1,0,0,1,1,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,0,1,3,3,1,0,0,0,0,0,0,0,0,0,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,0,1,3,3,1,0,0,0,0,0,0,0,0,0,0,0 }

};

/*************
* 备用的地图
**************/
int map3[26][26] = {
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,0,1,3,3,1,0,0,0,0,0,0,0,0,0,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,0,1,3,3,1,0,0,0,0,0,0,0,0,0,0,0 }

};
int map4[26][26] = {
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,1,1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,0,1,3,3,1,0,0,0,0,0,0,0,0,0,0,0 },
	{ 0,0,0,0,0,0,0,0,0,0,0,1,3,3,1,0,0,0,0,0,0,0,0,0,0,0 }

};

//优化的代码
void set_prop_map(int x, int y, int val/*要设定的值*/) {
	map[y][x] = val;
	map[y][x + 1] = val;
	map[y + 1][x] = val;
	map[y + 1][x + 1] = val;

}

// 
//初始化地图，可消除墙为1，不可消除墙为2，老鹰（3，4), whu标志为5,6
void init_map() {

	int i, j;
	IMAGE img_home, img_wall_1, img_wall_2, img_whu;
	loadimage(&img_home, _T("./res/img/home.jpg"), 50, 50); //老鹰图标
	loadimage(&img_wall_1, _T("./res/img/wall2.gif"), 25, 25);//不可消除的墙
	loadimage(&img_wall_2, _T("./res/img/wall1.gif"), 25, 25);//可消除的墙
	loadimage(&img_whu, _T("./res/img/whu.png"), 50, 50);//whu标志（不可消除）

	for (i = 0; i < 26; i++) {
		for (j = 0; j < 26; j++) {
			if (map[i][j] == 1) {
				putimage(25 * j, 25 * i, &img_wall_2);

			}
			else if (map[i][j] == 2) {
				putimage(25 * j, 25 * i, &img_wall_1);

			}
			else if (map[i][j] == 3) {
				putimage(25 * j, 25 * i, &img_home);
				
				map[i][j] = 4;
				map[i][j + 1] = 4;
				map[i + 1][j] = 4;
				map[i + 1][j + 1] = 4;

			}
			else if (map[i][j] == 5) {
				putimage(25 * j, 25 * i, &img_whu);
				map[i][j] = 6;
				map[i][j + 1] = 6;
				map[i + 1][j] = 6;
				map[i + 1][j + 1] = 6;

			}

		}

	}

}
 
 
//显示地图
void init_map_2(int* map, int rows, int cols) {
	
	int i, j;
	IMAGE img_home, img_wall_1, img_wall_2, img_whu;
	loadimage(&img_home, _T("./res/img/home.jpg"), 50, 50); //老鹰图标
	loadimage(&img_wall_1, _T("./res/img/wall2.gif"), 25, 25);//不可消除的墙
	loadimage(&img_wall_2, _T("./res/img/wall1.gif"), 25, 25);//可消除的墙
	loadimage(&img_whu, _T("./res/img/whu.png"), 50, 50);//whu标志（不可消除）

	for (i = 0; i < rows; i++) {
		for (j = 0; j < cols; j++) {
			if (*(map + cols * i + j) == 1) {
				putimage(25 * j, 25 * i, &img_wall_2);

			}
			else if (*(map + cols * i + j) == 2) {
				putimage(25 * j, 25 * i, &img_wall_1);

			}
			else if (*(map + cols * i + j) == 3) {
				putimage(25 * j, 25 * i, &img_home);
				//重复的改变数组数值可以设置一个函数来优化
				*(map + cols * i + j) = 4;
				*(map + cols * i + (j + 1)) = 4;
				*(map + cols * (i + 1) + j) = 4;
				*(map + cols * (i + 1) + (j + 1)) = 4;

			}
			else if (*(map + cols * i + j) == 5) {
				putimage(25 * j, 25 * i, &img_whu);
				*(map + cols * i + j) = 6;
				*(map + cols * i + (j + 1)) = 6;
				*(map + cols * (i + 1) + j) = 6;
				*(map + cols * (i + 1) + (j + 1)) = 6;

			}

		}

	}

}
void refresh() {
	for (int i = 0; i < 25; ++i) {
		for (int j = 0; j < 25; ++j) {
			map[i][j] = map2[i][j];

		}

	}

}